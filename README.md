# Банковская система

## Описание
Это простая банковская система, позволяющая устройствам в локальной сети обмениваться данными через HTTP API.

## Требования
- Python 3.6+
- Flask
- Requests
- PyCryptodome

## Установка

1. Клонируйте репозиторий:
```
git clone <url-репозитория>
cd payment-system
```

2. Создайте и активируйте виртуальное окружение:
```
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Установите зависимости:
```
pip install -r requirements.txt
```

## Запуск серверов

### Локальный запуск

#### Банковский сервер
Для запуска банковского сервера выполните:
```
python bank/server.py
```

Сервер будет доступен по адресу: `http://<ваш-ip-адрес>:8080`

#### Клиентский сервер
Для запуска клиентского сервера выполните:
```
python client/server.py
```

Клиентский сервер будет доступен по адресу: `http://<ваш-ip-адрес>:5001`

По умолчанию клиентский сервер настроен на взаимодействие с банковским сервером на `http://localhost:8080`.
Для изменения адреса банковского сервера используйте переменную окружения:

```
export BANK_SERVER_URL=http://<ip-адрес-банка>:8080
python client/server.py
```

### Запуск с использованием Docker

В проекте настроен Docker Compose для запуска банковского сервера и двух клиентских серверов в контейнерах:

```
docker-compose up -d
```

После запуска:
- Банковский сервер будет доступен по адресу: `http://localhost:8080`
- Клиент 1 будет доступен по адресу: `http://localhost:5001`
- Клиент 2 будет доступен по адресу: `http://localhost:5002`

Для остановки контейнеров:
```
docker-compose down
```

Для просмотра логов:
```
docker-compose logs -f
```

## API Endpoints

### Банковский сервер
```
GET /  - Проверка доступности сервера
GET /api/v1/status - Получение статуса сервера
```

### Клиентский сервер
```
GET /  - Проверка доступности клиентского сервера
GET /api/v1/check-bank - Проверка соединения с банковским сервером
POST /api/v1/transaction - Создание новой транзакции
```

Пример запроса для создания транзакции:
```json
{
  "amount": 100.50,
  "recipient": "user123",
  "description": "Оплата заказа"
}
```

## Добавление новых функций

Для добавления новых API-методов модифицируйте файлы:
- `bank/server.py` - для банковского сервера
- `client/server.py` - для клиентского сервера

## Безопасность

В производственной среде рекомендуется:
1. Отключить режим отладки (`debug=False`)
2. Настроить HTTPS
3. Реализовать аутентификацию и авторизацию
4. Ограничить доступ только для доверенных клиентов 